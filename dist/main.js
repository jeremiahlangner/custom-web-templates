(()=>{var p=class{constructor(e,t,o){let a=this,m={get(i,s){return typeof i[s]=="object"&&i[s]!==null?new Proxy(i[s],m):(a._getter(s),i[s])},set(i,s,h){return i[s]===h||(a._setter(s,h,i[s]),i[s]=h),!0}};return this._obj=new Proxy(o,m),this._obj}};var n=class{static async getProvider(e){return await n._providers[e]}static load(){this._services=window.vcdc.services}static async getService(e){return n.load(),console.log(e,await n._services[e]),await n._services[e]}static registerServices(e){for(let t in e)this.registerService(t,e[t])}static registerService(e,t){n._services[e]=t,!window.vcdc.services[e]&&(window.vcdc.services[e]=t)}},r=n;r._providers={Application:Promise.resolve(window.vcdc)},r._services={};var l=class{constructor(){}async request(e){return fetch(e.url,e).then(t=>e.headers&&e.headers.Accept==="application/json"?t.json():t)}};var u=class{constructor(){}};var g=class{constructor(){this._hashes=[];r.getProvider("Application").then(e=>{this._application=e})}hash(){let e="";for(;this._hashes.find(t=>t==e);)e=Math.random().toString(16).substring(2,15);return this._hashes.push(e),e}delete(e){document.getElementById(e)?.remove()}insert(e,t,o,a){e.id=t,o||document.body.appendChild(e),a||document.getElementById(o)?.appendChild(e),document.getElementById(a)}};var d=class{constructor(e){r.getService("ApiService").then(t=>{this.apiService=t,this.apiService.request({url:e,headers:{Accept:"application/json","Content-type":"application/json"}}).then(o=>this.rules=o)})}testRule(e){}};var v=class{constructor(){this.changeList=[];window.vcdc={services:{},components:{},app:{}};let e=new p({},()=>{},this.changes);this.registerServices(),this.registerComponents()}changes(){for(let e of this.changeList);}async registerComponents(){let t=await(await r.getService("ApiService")).request({url:"./assets/configs/components.json",headers:{"Content-type":"application/json",Accept:"application/json"}});console.log(t)}registerServices(){r.registerServices({ApiService:new l,Storage:new u,Rules:new d("./assets/configs/rules.json"),ComponentService:new g})}},E=new v;})();
